/*! For license information please see project.media.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[560],{7906:function(e){e.exports=function(e){function t(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){var t=void 0;if("string"!=typeof e)try{t=JSON.stringify(e)}catch(e){throw"Failed to copy value to clipboard. Unknown type."}else t=e;var i=document.createElement("textarea");if(i.value=t,i.setAttribute("readonly",""),i.style.cssText="position:fixed;pointer-events:none;z-index:-9999;opacity:0;",document.body.appendChild(i),navigator.userAgent.match(/ipad|ipod|iphone/i)){i.contentEditable=!0,i.readOnly=!0;var s=document.createRange();s.selectNodeContents(i);var r=window.getSelection();r.removeAllRanges(),r.addRange(s),i.setSelectionRange(0,999999)}else i.select();var a=!1;try{a=document.execCommand("copy")}catch(e){console.warn(e)}return document.body.removeChild(i),a};t.default={install:function(e){e.prototype.$clipboard=s;var t=function(e){return function(){return"$"+e++}}(1),i={},r=function(e){e&&(i[e]=null,delete i[e])},a=function(e){var s=t();return i[s]=e,s};e.directive("clipboard",{bind:function(e,t){var r=t.arg,n=t.value;switch(r){case"error":var o=a(n);return void(e.dataset.clipboardErrorHandler=o);case"success":var l=a(n);return void(e.dataset.clipboardSuccessHandler=l);default:var c=a((function(r){if(t.hasOwnProperty("value")){var a={value:"function"==typeof n?n():n,event:r},o=s(a.value)?e.dataset.clipboardSuccessHandler:e.dataset.clipboardErrorHandler,l=i[o];l&&l(a)}}));return e.dataset.clipboardClickHandler=c,void e.addEventListener("click",i[c])}},unbind:function(e){var t=e.dataset,s=t.clipboardSuccessHandler,a=t.clipboardErrorHandler,n=t.clipboardClickHandler;r(s),r(a),n&&(e.removeEventListener("click",i[n]),r(n))}})}}}])},4006:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const s={props:{type:{type:String,default:"submit"},color:{type:String,default:"gray-800"},hover:{type:String,default:null},padding:{type:String,default:null},disabled:{type:Boolean,default:!1}},computed:{bgColor:function(){var e="";if(this.disabled)e="bg-indigo-200 cursor-not-allowed";else{var t="bg-"+this.color,i=this.color.split("-"),s=null==this.hover?"bg-"+i[0]+"-"+(parseInt(i[1])+100):"bg-"+this.hover,r="bg-"+i[0]+"-"+(parseInt(i[1])+100);i[0],parseInt(i[1]),i[0];e=t+" hover:"+s+" active:"+r}return null===this.padding?e+=" p-3 ":e+=" "+this.padding+" ",e}}};const r=(0,i(1900).Z)(s,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"items-center border border-transparent rounded-sm text-sm text-white focus:outline-none transition ease-in-out duration-150",class:e.bgColor,attrs:{type:e.type,disabled:e.disabled}},[e._t("default")],2)}),[],!1,null,null,null).exports},617:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const s={data:function(){return{searchCollection:"",openSearchInput:!1}},computed:{filterSearch:function(){var e=this;if(void 0!==this.project.collections)return this.project.collections.filter((function(t){return!e.searchCollection||t.name.toLowerCase().indexOf(e.searchCollection.toLowerCase())>-1}))}},props:["project"]};const r=(0,i(1900).Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-4 bg-white"},[i("div",{staticClass:"mb-4"},[e.openSearchInput?e._e():i("h4",{staticClass:"mb-2 p-2 font-bold text-lg flex justify-between items-center h-10"},[i("div",[e._v("\n                Content    \n            ")]),e._v(" "),i("div",[i("a",{staticClass:"text-sm text-blue-500 p-1 px-3 cursor-pointer rounded-md hover:bg-gray-100",on:{click:function(t){e.openSearchInput=!0}}},[i("i",{staticClass:"fas fa-search"})])])]),e._v(" "),e.openSearchInput?i("div",{staticClass:"mb-2 relative flex w-full flex-wrap items-stretch mb-2 h-10"},[e._m(0),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchCollection,expression:"searchCollection"}],staticClass:"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded-sm text-sm w-full pl-10 border-gray-200 focus:border-gray-300",attrs:{type:"text",placeholder:"Search...",autofocus:""},domProps:{value:e.searchCollection},on:{input:function(t){t.target.composing||(e.searchCollection=t.target.value)}}}),e._v(" "),i("span",{staticClass:"z-9 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent rounded-sm text-base items-center justify-center w-8 py-3 right-0 pr-3 cursor-pointer",on:{click:function(t){e.searchCollection="",e.openSearchInput=!1}}},[i("i",{staticClass:"fas fa-times-circle"})])]):e._e()]),e._v(" "),i("ul",[e._l(e.filterSearch,(function(t){return i("li",{key:t.id,staticClass:"mb-2"},[i("router-link",{staticClass:"block w-full p-2 cursor-pointer hover:bg-gray-100 rounded",attrs:{to:{name:"projects.content.list",params:{project_id:e.project.id,col_id:t.id}}}},[e._v(e._s(t.name))])],1)})),e._v(" "),e._m(1),e._v(" "),i("li",{staticClass:"mb-2"},[void 0!==e.project.id?i("router-link",{staticClass:"block w-full p-2 cursor-pointer hover:bg-gray-100 rounded",attrs:{to:{name:"projects.media_library",params:{id:e.project.id}}}},[i("i",{staticClass:"fas fa-images text-gray-600 mr-3"}),e._v(" Media Library")]):e._e()],1)],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"z-9 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent rounded-sm text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{staticClass:"fas fa-search"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"mb-2"},[t("hr")])}],!1,null,null,null).exports},8277:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var s=i(8005),r=i(617),a=i(7020);const n={components:{ProjectHeader:s.Z,ContentSidebar:r.Z,MediaLibrary:a.Z},data:function(){return{project:{}}},methods:{getProject:function(){var e=this;axios.get("/admin/projects/"+this.$route.params.project_id).then((function(t){e.project=t.data}))}},mounted:function(){this.getProject()}};const o=(0,i(1900).Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex h-full overflow-hidden"},[i("div",{staticClass:"w-96 overflow-x-hidden h-full bg-white"},[i("project-header",{staticClass:"bg-white",attrs:{project:e.project}}),e._v(" "),i("content-sidebar",{attrs:{project:e.project}})],1),e._v(" "),i("div",{staticClass:"p-4 w-full overflow-x-auto"},[i("media-library",{attrs:{project:e.project}})],1)])}),[],!1,null,null,null).exports},7020:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var s=i(538),r=i(7906),a=i.n(r),n=i(4006),o=i(2948),l=i.n(o),c=i(4368);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}s.default.use(a());const f={components:{UiButton:n.Z,FileUpload:l()},props:{project:{},selected:{default:function(){return[]}},disableDelete:{default:!1},media_type:{type:Number}},data:function(){return{media:{},search:null,selectedFiles:[],selectedFile:null,showUploader:!1,selectAll:!1,files:[],headers:{"X-Csrf-Token":document.head.querySelector('meta[name="csrf-token"]').content},uploadData:{project_id:null},upload_max_filesize:null,fileUpdateData:{}}},methods:{getMedia:function(e){var t=this;void 0===e&&(e=1),axios.get("/admin/media/get-files/"+this.project.id+"?page="+e,{params:{search:this.search}}).then((function(e){t.media=e.data.media,t.uploadData.project_id=t.project.id,t.upload_max_filesize=e.data.upload_max_filesize})),this.selectAll=!1},hideUploader:function(){this.showUploader=!1;for(var e=0;e<this.files.length;e++){var t=this.files[e];t.success&&this.hasInsertListener&&this.selectedFiles.push(t.response.id)}this.$forceUpdate(),this.files=[],this.getMedia()},inputFilter:function(e,t,i){if(e&&!t){if(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(e.name))return i();if(/\.(php5?|html?|jsx?)$/i.test(e.name))return i()}if(e&&""===e.error&&e.file&&(!t||e.file!==t.file)){e.blob="";var s=window.URL||window.webkitURL;s&&(e.blob=s.createObjectURL(e.file)),e.thumb="",e.blob&&"image/"===e.type.substr(0,6)&&(e.thumb=e.blob)}},selectFile:function(e){if(null!==this.selectedFile&&this.selectedFile.id===e.id){var t=this.selectedFiles[this.selectedFiles.length-2];void 0!==t?(this.selectedFile=this.media.data.find((function(e){return e.id===t})),this.fileUpdateData=u({},this.selectedFile),this.fileUpdateData.name=this.fileUpdateData.name.split(".")[0]):this.selectedFile=null}else this.checkIfSelected(e)||(this.selectedFile=e,this.fileUpdateData=u({},e),this.fileUpdateData.name=this.fileUpdateData.name.split(".")[0]);this.selectAll=!1,1==this.media_type?this.selectedFiles.includes(e.id)?this.selectedFiles.splice(this.selectedFiles.findIndex((function(t){return t===e.id})),1):(this.selectedFiles=[],this.selectedFiles.push(e.id)):this.selectedFiles.includes(e.id)?this.selectedFiles.splice(this.selectedFiles.findIndex((function(t){return t===e.id})),1):this.selectedFiles.push(e.id)},selectAllFiles:function(){if(this.selectAll)this.selectedFiles=[],this.selectedFile=null,this.fileUpdateData={};else{for(var e=0;e<this.media.data.length;e++)this.selectedFiles.includes(this.media.data[e].id)||this.selectedFiles.push(this.media.data[e].id);var t=this.selectedFiles[this.selectedFiles.length-1];void 0!==t&&(this.selectedFile=this.media.data.find((function(e){return e.id===t})),this.fileUpdateData=u({},this.selectedFile),this.fileUpdateData.name=this.fileUpdateData.name.split(".")[0])}},checkIfSelected:function(e){return this.selectedFiles.includes(e.id)},insertFiles:function(){this.$emit("insert",this.selectedFiles),this.selectAll=!1},deleteFile:function(e,t){var i=this;this.$swal.fire({title:"Are you sure",text:"you want to delete this file?"}).then((function(t){t.value&&axios.delete("/admin/media/delete/"+i.$route.params.project_id+"/"+e.id,{params:{project_id:i.project.id}}).then((function(t){i.$toast.success("File deleted!"),i.getMedia();for(var s=0;s<i.selectedFiles.length;s++){var r=i.selectedFiles[s];e.id===r&&i.$delete(i.selectedFiles,s)}i.selectedFile.id==e.id&&(i.selectedFile=null,i.fileUpdateData={})}))}))},deleteSelected:function(){var e=this;this.$swal.fire({title:"Are you sure",text:"you want to delete these "+this.selectedFiles.length+" files?"}).then((function(t){t.value&&axios.post("/admin/media/delete-selected/"+e.$route.params.project_id,{files:e.selectedFiles}).then((function(t){e.$toast.success("Files deleted!"),e.getMedia(),e.selectedFiles=[],e.selectedFile=null,e.fileUpdateData={}}))}))},copyToClipboard:function(e){this.$clipboard(e),this.$toast.success("Copied to clipboard")},updateFileSubmit:function(){var e=this;axios.post("/admin/media/update/"+this.$route.params.project_id+"/"+this.fileUpdateData.id,this.fileUpdateData).then((function(t){e.$toast.success("File updated!"),e.selectedFile=t.data,e.fileUpdateData=u({},t.data),e.fileUpdateData.name=e.fileUpdateData.name.split(".")[0],e.getMedia()}))},checkRole:c.Z},computed:{hasInsertListener:function(){return this.$listeners&&this.$listeners.insert}},watch:{"project.id":function(e,t){this.getMedia()},selected:function(e,t){this.selectedFiles=e}}};const h=(0,i(1900).Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h4",{staticClass:"mb-2 py-2 font-bold text-lg"},[i("i",{staticClass:"fas fa-images text-gray-600"}),e._v(" Media Library\n        "),e.showUploader?e._e():i("ui-button",{staticClass:"float-right",attrs:{color:"indigo-500"},nativeOn:{click:function(t){e.showUploader=!0}}},[i("i",{staticClass:"fas fa-upload text-white mr-3"}),e._v(" Upload Files")]),e._v(" "),e.showUploader||0===e.selectedFiles.length||e.disableDelete?e._e():i("ui-button",{staticClass:"float-right mr-2",attrs:{color:"red-500"},nativeOn:{click:function(t){return e.deleteSelected()}}},[i("i",{staticClass:"fas fa-trash text-white mr-3"}),e._v(" Delete ("+e._s(this.selectedFiles.length)+")")]),e._v(" "),!e.showUploader&&e.hasInsertListener?i("ui-button",{staticClass:"float-right mr-2",attrs:{color:"green-500"},nativeOn:{click:function(t){return e.insertFiles()}}},[i("i",{staticClass:"fas fa-plus text-white mr-3"}),e._v(" Insert Files ("+e._s(this.selectedFiles.length)+")")]):e._e(),e._v(" "),e.showUploader?i("ui-button",{staticClass:"float-right",attrs:{color:"green-500"},nativeOn:{click:function(t){return e.hideUploader.apply(null,arguments)}}},[i("i",{staticClass:"fas fa-chevron-left text-white mr-3"}),e._v(" File List")]):e._e(),e._v(" "),!e.showUploader||0==e.files.length||e.$refs.upload&&e.$refs.upload.active?e._e():i("ui-button",{staticClass:"float-right mr-2",attrs:{color:"indigo-500"},nativeOn:{click:function(t){e.$refs.upload.active=!0}}},[e._v("  Start Upload ")])],1),e._v(" "),e.showUploader?e._e():i("div",[i("div",{staticClass:"flex w-full mt-4 clear-both"},[i("div",{staticClass:"w-full"},[e._m(0),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"px-3 py-3 placeholder-gray-400 text-gray-700 bg-white rounded-sm text-sm w-full pl-10 border-gray-200 focus:border-gray-300",attrs:{type:"text",placeholder:"Search for files..."},domProps:{value:e.search},on:{keyup:function(t){return e.getMedia()},input:function(t){t.target.composing||(e.search=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"bg-white rounded-sm text-sm px-3 flex items-center text-center border border-gray-200 ml-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],staticClass:"flex",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{click:function(t){return e.selectAllFiles()},change:function(t){var i=e.selectAll,s=t.target,r=!!s.checked;if(Array.isArray(i)){var a=e._i(i,null);s.checked?a<0&&(e.selectAll=i.concat([null])):a>-1&&(e.selectAll=i.slice(0,a).concat(i.slice(a+1)))}else e.selectAll=r}}})])]),e._v(" "),i("div",{staticClass:"grid grid-cols-8"},[i("div",{staticClass:"col-span-6"},[i("div",[i("div",{staticClass:"my-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4"},e._l(e.media.data,(function(t,s){return i("div",{key:t.id,staticClass:"relative rounded-sm bg-white border-4",class:{"border-indigo-500":e.selectedFile&&e.selectedFile.id==t.id}},[i("input",{directives:[{name:"show",rawName:"v-show",value:e.checkIfSelected(t),expression:"checkIfSelected(file)"}],staticClass:"absolute inset-0 m-3",attrs:{type:"checkbox"},domProps:{checked:e.checkIfSelected(t)}}),e._v(" "),i("div",[i("div",{staticClass:"w-full h-32 absolute top-0 left-0 bg-black bg-opacity-70 items-center text-center flex opacity-0 hover:opacity-100 z-10"},[i("div",{staticClass:"absolute inset-0 w-full text-left z-10",on:{click:function(i){return e.selectFile(t)}}},[i("input",{staticClass:"m-3",attrs:{type:"checkbox"},domProps:{checked:e.checkIfSelected(t)}})]),e._v(" "),i("div",{staticClass:"w-full z-20"},[i("div",{staticClass:"text-sm w-full"},[i("a",{attrs:{href:t.full_url,target:"_blank"}},["jpg"==t.type||"jpeg"==t.type||"png"==t.type||"bmp"==t.type||"gif"==t.type||"webp"==t.type?i("i",{staticClass:"fa fa-eye text-gray-100 cursor-pointer hover:text-gray-200 text-lg mr-2"}):i("i",{staticClass:"fa fa-file-download text-gray-100 cursor-pointer hover:text-gray-200 text-lg mr-2"})]),e._v(" "),e.disableDelete?e._e():i("i",{staticClass:"fa fa-trash-alt text-gray-100 cursor-pointer hover:text-gray-200 text-lg ml-2",on:{click:function(i){return e.deleteFile(t,s)}}})])])]),e._v(" "),"jpg"==t.type||"jpeg"==t.type||"png"==t.type||"gif"==t.type||"webp"==t.type?i("span",[i("img",{staticClass:"w-full h-32 object-cover",attrs:{src:t.full_url_thumb}})]):i("div",{staticClass:"w-full h-32 object-cover flex items-center text-center"},[i("div",{staticClass:"w-full"},["pdf"==t.type?i("i",{staticClass:"far fa-file-pdf text-5xl text-red-500"}):"avi"==t.type||"mp4"==t.type||"mov"==t.type||"webm"==t.type?i("i",{staticClass:"far fa-file-video text-5xl text-blue-500"}):"wav"==t.type||"ogg"==t.type||"mpeg"==t.type?i("i",{staticClass:"far fa-file-audio text-5xl text-yellow-500"}):"xls"==t.type||"xlsx"==t.type?i("i",{staticClass:"far fa-file-excel text-5xl text-green-500"}):"doc"==t.type||"docx"==t.type?i("i",{staticClass:"far fa-file-word text-5xl text-blue-500"}):"zip"==t.type?i("i",{staticClass:"far fa-file-archive text-5xl text-yellow-300"}):i("i",{staticClass:"far fa-file text-5xl text-gray-400"})])])])])})),0),e._v(" "),i("pagination",{staticClass:"float-left",attrs:{data:e.media,size:"small",limit:3},on:{"pagination-change-page":e.getMedia}}),e._v(" "),i("div",{staticClass:"text-sm italic float-right text-gray-500"},[e._v("\n                        total "+e._s(e.media.total)+" files, "+e._s(e.media.from)+" - "+e._s(e.media.to)+" showing\n                    ")])],1)]),e._v(" "),i("div",{staticClass:"col-span-2 m-4 mt-5 p-4 border border-gray-200 rounded-sm bg-gray-100"},[null!==e.selectedFile?i("div",[i("h3",{staticClass:"font-semibold text-sm mb-4"},[e._v("FILE DETAILS")]),e._v(" "),i("div",[i("div",{staticClass:"float-left mr-2 w-28 bg-white"},["jpg"==e.selectedFile.type||"jpeg"==e.selectedFile.type||"png"==e.selectedFile.type||"gif"==e.selectedFile.type||"webp"==e.selectedFile.type?i("span",[i("img",{staticClass:"w-full h-28 object-cover rounded-sm border rounded-sm",attrs:{src:e.selectedFile.full_url_thumb}})]):i("div",{staticClass:"w-full h-28 object-cover flex items-center text-center border rounded-sm"},[i("div",{staticClass:"w-full"},["pdf"==e.selectedFile.type?i("i",{staticClass:"far fa-file-pdf text-5xl text-red-500"}):"avi"==e.selectedFile.type||"mp4"==e.selectedFile.type||"mov"==e.selectedFile.type||"webm"==e.selectedFile.type?i("i",{staticClass:"far fa-file-video text-5xl text-blue-500"}):"wav"==e.selectedFile.type||"ogg"==e.selectedFile.type||"mpeg"==e.selectedFile.type?i("i",{staticClass:"far fa-file-audio text-5xl text-yellow-500"}):"xls"==e.selectedFile.type||"xlsx"==e.selectedFile.type?i("i",{staticClass:"far fa-file-excel text-5xl text-green-500"}):"doc"==e.selectedFile.type||"docx"==e.selectedFile.type?i("i",{staticClass:"far fa-file-word text-5xl text-blue-500"}):"zip"==e.selectedFile.type?i("i",{staticClass:"far fa-file-archive text-5xl text-yellow-300"}):i("i",{staticClass:"far fa-file text-5xl text-gray-400"})])])]),e._v(" "),i("div",{staticClass:"float-left text-sm"},[i("div",{staticClass:"font-semibold"},[e._v(e._s(e.selectedFile.name))]),e._v(" "),i("div",[e._v(e._s(e._f("date")(e.selectedFile.created_at,"D MMM YYYY")))]),e._v(" "),i("div",[e._v(e._s(e._f("prettyBytes")(e.selectedFile.size)))]),e._v(" "),null!==e.selectedFile.width&&null!==e.selectedFile.height?i("div",[e._v("\n                                "+e._s(e.selectedFile.width)+" x "+e._s(e.selectedFile.height)+"\n                            ")]):e._e()]),e._v(" "),i("div",{staticClass:"clear-left"})]),e._v(" "),i("div",{staticClass:"mt-6 clear-both"},[i("div",[i("label",{directives:[{name:"formlabel",rawName:"v-formlabel"}]},[e._v("File Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.fileUpdateData.name,expression:"fileUpdateData.name"}],staticClass:"text-sm w-full rounded-sm border-gray-300",attrs:{type:"text"},domProps:{value:e.fileUpdateData.name},on:{input:function(t){t.target.composing||e.$set(e.fileUpdateData,"name",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"mt-4"},[i("label",{directives:[{name:"formlabel",rawName:"v-formlabel"}]},[e._v("Caption")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.fileUpdateData.caption,expression:"fileUpdateData.caption"}],staticClass:"text-sm w-full rounded-sm border-gray-300",attrs:{type:"text"},domProps:{value:e.fileUpdateData.caption},on:{input:function(t){t.target.composing||e.$set(e.fileUpdateData,"caption",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"mt-4"},[i("label",{directives:[{name:"formlabel",rawName:"v-formlabel"}]},[e._v("File Path")]),e._v(" "),i("div",{staticClass:"flex rounded-sm cursor-pointer",on:{click:function(t){return e.copyToClipboard(e.selectedFile.full_url)}}},[e._m(1),e._v(" "),i("input",{staticClass:"text-sm w-full rounded-sm border-gray-300 rounded-l-none cursor-pointer",attrs:{type:"text",readonly:"",disabled:""},domProps:{value:e.selectedFile.full_url}})])]),e._v(" "),i("div",{staticClass:"mt-4"},[i("ui-button",{attrs:{color:"indigo-500"},nativeOn:{click:function(t){return e.updateFileSubmit()}}},[e._v("Update File")])],1)])]):e._e()])])]),e._v(" "),e.showUploader?i("div",[i("div",{staticClass:"mt-4"},[i("div",{staticClass:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},[i("div",{staticClass:"space-y-1 text-center"},[i("svg",{staticClass:"mx-auto h-12 w-12 text-gray-400",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"}},[i("path",{attrs:{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),e._v(" "),i("div",{staticClass:"flex text-sm text-gray-600 text-center"},[i("label",{staticClass:"relative rounded-md font-medium text-indigo-600 hover:text-indigo-500 w-full",attrs:{for:"file-upload"}},[i("file-upload",{ref:"upload",attrs:{"post-action":"/admin/media/upload/"+e.$route.params.project_id,multiple:!0,size:e.upload_max_filesize,drop:!0,"drop-directory":!0,headers:e.headers,data:e.uploadData,thread:4},on:{"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[i("span",{staticClass:"cursor-pointer"},[e._v("Select a file or drag and drop")])])],1)]),e._v(" "),null!==e.upload_max_filesize?i("p",{staticClass:"text-xs text-gray-500"},[e._v("\n                        Up to "+e._s(e._f("prettyBytes")(e.upload_max_filesize,1024))+"\n                    ")]):e._e(),e._v(" "),void 0!==e.project.id&&e.checkRole(["admin"+e.project.id])&&e.project.s3?i("p",{staticClass:"text-sm text-gray-500 pt-5 w-full text-center"},[i("i",{staticClass:"fas fa-hdd"}),e._v("\n                        Default upload disk is "),i("strong",[e._v(e._s("s3"==e.project.disk?"AWS S3":"Local"))]),e._v(". You can change it in "),i("router-link",{staticClass:"font-bold text-indigo-500",attrs:{to:{name:"projects.settings",params:{project_id:e.project.id}}}},[e._v("settings")]),e._v(".\n                    ")],1):e._e()])]),e._v(" "),0!=e.files.length?i("div",{staticClass:"my-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4"},e._l(e.files,(function(t){return i("div",{key:t.id,staticClass:"relative"},[t.thumb?i("img",{staticClass:"w-full h-32 object-cover",attrs:{src:t.thumb}}):e._e(),e._v(" "),t.thumb?e._e():i("div",{staticClass:"w-full h-32 object-cover border border-gray-200 flex items-center text-center"},[i("div",{staticClass:"w-full"},["application/pdf"==t.type?i("i",{staticClass:"far fa-file-pdf text-5xl text-red-500"}):"video/avi"==t.type||"video/mp4"==t.type||"video/quicktime"==t.type||"video/webm"==t.type?i("i",{staticClass:"far fa-file-video text-5xl text-blue-500"}):"audio/wav"==t.type||"audio/ogg"==t.type||"audio/mpeg"==t.type?i("i",{staticClass:"far fa-file-audio text-5xl text-yellow-500"}):"application/vnd.ms-excel"==t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==t.type?i("i",{staticClass:"far fa-file-excel text-5xl text-green-500"}):"application/msword"==t.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==t.type?i("i",{staticClass:"far fa-file-word text-5xl text-blue-500"}):"application/zip"==t.type?i("i",{staticClass:"far fa-file-archive text-5xl text-yellow-300"}):i("i",{staticClass:"far fa-file text-5xl text-gray-400"})])]),e._v(" "),i("div",{staticClass:"w-full mt-1"},[i("div",{staticClass:"text-xs float-left",attrs:{title:t.name}},[e._v("\n                            "+e._s(t.name.substring(0,16))+"\n                            "),t.name.length>16?i("span",[e._v("...")]):e._e(),e._v(" "),i("div",[e._v(e._s(e._f("prettyBytes")(t.size)))])]),e._v(" "),i("div",{staticClass:"text-sm float-right"},[t.success?e._e():i("i",{staticClass:"fa fa-times-circle text-red-400 cursor-pointer hover:text-red-600",on:{click:function(i){return i.preventDefault(),e.$refs.upload.remove(t)}}})])]),e._v(" "),t.active||t.error||t.success?i("div",{staticClass:"absolute inset-0 bg-white bg-opacity-90 w-full h-32 p-4 flex items-center text-center border border-gray-200"},[i("div",{staticClass:"relative pt-1 w-full"},[i("div",{staticClass:"flex mb-2 items-center justify-between"},[i("div",[i("span",{staticClass:"text-xs font-semibold inline-block py-1 rounded-sm",class:{"text-green-500":t.success,"text-red-500":t.error,"text-blue-500":t.active}},[t.error?i("span",[e._v(e._s(t.error))]):t.success?i("span",[e._v("done")]):t.active?i("span",[e._v("uploading")]):e._e()])]),e._v(" "),i("div",{staticClass:"text-right"},[i("span",{staticClass:"text-xs font-semibold inline-block",class:{"text-green-500":t.success,"text-red-500":t.error,"text-blue-500":t.active}},[e._v("\n                                        "+e._s(t.progress)+"%\n                                    ")])])]),e._v(" "),i("div",{staticClass:"overflow-hidden h-2 mb-4 text-xs flex rounded",class:{"bg-green-200":t.success,"bg-red-200":t.error,"bg-blue-200":t.active}},[i("div",{staticClass:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center",class:{"bg-green-500":t.success,"bg-red-500":t.error,"bg-blue-500":t.active},style:{width:t.progress+"%"}})])])]):e._e()])})),0):e._e()])]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent rounded-sm text-base items-center justify-center w-8 pl-3 py-3"},[t("i",{staticClass:"fas fa-search"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"inline-flex items-center px-3 rounded-l-sm border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm cursor-pointer"},[t("i",{staticClass:"far fa-copy"})])}],!1,null,null,null).exports},8005:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const s={props:["project"],methods:{checkRole:i(4368).Z}};const r=(0,i(1900).Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"p-4 flex border-b"},[i("div",{staticClass:"w-full"},[i("div",{staticClass:"text-xl font-bold"},[e._v("\n            "+e._s(e.project.name)+"\n        ")]),e._v(" "),i("div",{staticClass:"text-sm"},[e._v(e._s(e.project.description))])]),e._v(" "),i("div",{staticClass:"flex items-center"},[void 0!==e.project.id&&e.checkRole(["admin"+e.project.id])?i("router-link",{staticClass:"text-xl text-gray-600 cursor-pointer",attrs:{to:{name:"projects.settings",params:{project_id:e.project.id}},"exact-active-class":"bg-none"}},[i("i",{staticClass:"fas fa-cog"})]):e._e()],1)])}),[],!1,null,null,null).exports},2948:function(e){e.exports=function(){"use strict";var e=function(e){var t=new XMLHttpRequest;return t.open(e.method||"GET",e.url),t.responseType="json",e.headers&&Object.keys(e.headers).forEach((function(i){t.setRequestHeader(i,e.headers[i])})),t},t=function(e,t){return new Promise((function(i,s){e.onload=function(){if(e.status>=200&&e.status<300){var t;try{t=JSON.parse(e.response)}catch(i){t=e.response}i(t)}else s(e.response)},e.onerror=function(){return s(e.response)},e.send(JSON.stringify(t))}))},i=function(e,t){var i=new FormData;for(var s in t)i.append(s,t[s]);return new Promise((function(t,s){e.onload=function(){if(e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.response)}catch(t){i=e.response}t(i)}else s(e.response)},e.onerror=function(){return s(e.response)},e.send(i)}))};function s(i){var s=e(i);return t(s,i.body)}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(e,i){a(this,t),this.file=e,this.options=i,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return r(t,[{key:"createChunks",value:function(){this.chunks=[];for(var e=0,t=this.chunkSize;e<this.fileSize;)this.chunks.push({blob:this.file.file.slice(e,t),startOffset:e,active:!1,retries:this.maxRetries}),t=(e=t)+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach((function(e){e.xhr.abort(),e.active=!1})),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.start(),this.promise}},{key:"start",value:function(){var e=this;s({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then((function(t){if("success"!==t.status)return e.file.response=t,e.reject("server");e.sessionId=t.data.session_id,e.chunkSize=t.data.end_offset,e.createChunks(),e.startChunking()})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startChunking",value:function(){for(var e=0;e<this.maxActiveChunks;e++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(0===this.chunksUploading.length)return this.finish()}}},{key:"uploadChunk",value:function(t){var s=this;t.progress=0,t.active=!0,this.updateFileProgress(),t.xhr=e({method:"POST",headers:this.headers,url:this.action}),t.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(t.progress=Math.round(e.loaded/e.total*100))}),!1),i(t.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:t.startOffset,chunk:t.blob})).then((function(e){if(t.active=!1,"success"===e.status)t.uploaded=!0;else if(t.retries--<=0)return s.stopChunks(),s.reject("upload");s.uploadNextChunk()})).catch((function(){if(t.active=!1,t.retries--<=0)return s.stopChunks(),s.reject("upload");s.uploadNextChunk()}))}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),this.stopSpeedCalc(),s({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then((function(t){if(e.file.response=t,"success"!==t.status)return e.reject("server");e.resolve(t)})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startSpeedCalc",value:function(){var e=this;this.file.speed=0;var t=0;this.speedInterval||(this.speedInterval=window.setInterval((function(){var i=e.progress/100*e.fileSize;e.file.speed=i-t,t=i}),1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}},{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,t=this.chunksUploaded.length/this.chunks.length*100,i=this.chunksUploading.reduce((function(t,i){return t+(0|i.progress)/e.chunks.length}),0);return Math.min(t+i,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter((function(e){return!e.active&&!e.uploaded}))}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter((function(e){return!!e.xhr&&!!e.active}))}},{key:"chunksUploaded",get:function(){return this.chunks.filter((function(e){return!!e.uploaded}))}}]),t}();function o(e,t,i,s,r,a,n,o,l,c){"boolean"!=typeof n&&(l=o,o=n,n=!1);var d,u="function"==typeof i?i.options:i;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),s&&(u._scopeId=s),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=n?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),d)if(u.functional){var p=u.render;u.render=function(e,t){return d.call(t),p(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,d):[d]}return i}var l=o,c=void 0,d=void 0,u=void 0,p=l({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,capture:e.$parent.capture,disabled:e.$parent.disabled,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},staticRenderFns:[]},c,{methods:{change:function(e){this.$parent.addInputFile(e.target),e.target.files?(e.target.value="",e.target.files.length&&!/safari/i.test(navigator.userAgent)&&(e.target.type="",e.target.type="file")):(this.$destroy(),new this.constructor({parent:this.$parent,el:this.$el}))}}},d,!1,u,void 0,void 0),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function v(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var m={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:n},g={components:{InputFile:p},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return m}}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var e=document.createElement("input");if(e.type="file",e.multiple=!0,window.FormData&&e.files?("boolean"!=typeof e.webkitdirectory&&"boolean"!=typeof e.directory||(this.features.directory=!0),this.features.html5&&void 0!==e.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var t=0;t<this.files.length;t++){var i=this.files[t];this.maps[i.id]=i}this.$nextTick((function(){var e=this;this.$parent?(this.$parent.$forceUpdate(),this.$parent.$nextTick((function(){e.watchDrop(e.drop)}))):this.watchDrop(this.drop)}))},beforeDestroy:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1)},computed:{uploaded:function(){for(var e=void 0,t=0;t<this.files.length;t++)if((e=this.files[t]).fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(m,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var i=0;i<this.files.length;i++){var s=this.files[i];this.maps[s.id]=s}for(var r in this.maps){var a=this.maps[r],n=t[r];a!==n&&this.emitFile(a,n)}for(var o in t)this.maps[o]||this.emitFile(void 0,t[o])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var t=0;t<e.length;t++)this.emitFile(void 0,e[t])}return!0},get:function(e){return!!e&&("object"===(void 0===e?"undefined":h(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,i=e,s=i instanceof Array;s||(i=[i]);for(var r=[],a=0;a<i.length;a++){var n=i[a];this.features.html5&&n instanceof Blob&&(n={file:n,size:n.size,name:n.webkitRelativePath||n.relativePath||n.name||"unknown",type:n.type});var o=!1;if(!1===n.fileObject||(n.fileObject||"undefined"!=typeof Element&&n.el instanceof Element||"undefined"!=typeof Blob&&n.file instanceof Blob)&&(o=!0),o&&((n=f({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},n,{response:{},progress:"0.00",speed:0})).data=f({},this.data,n.data?n.data:{}),n.headers=f({},this.headers,n.headers?n.headers:{})),n.id||(n.id=Math.random().toString(36).substr(2)),!this.emitFilter(n,void 0)){if(this.maximum>1&&r.length+this.files.length>=this.maximum)break;if(r.push(n),1===this.maximum)break}}if(!r.length)return!1;1===this.maximum&&this.clear();var l=void 0;if(!0===t||0===t)l=r.concat(this.files);else if(t){var c;(c=l=this.files.concat([])).splice.apply(c,[t,0].concat(r))}else l=this.files.concat(r);this.files=l;for(var d=0;d<r.length;d++){var u=r[d];this.maps[u.id]=u}this.emitInput();for(var p=0;p<r.length;p++)this.emitFile(r[p],void 0);return s?r:r[0]},addInputFile:function(e){var t=[];if(e.files)for(var i=0;i<e.files.length;i++){var s=e.files[i];t.push({size:s.size,name:s.webkitRelativePath||s.relativePath||s.name,type:s.type,file:s})}else{var r=e.value.replace(/\\/g,"/").split("/");delete e.__vuex__,t.push({name:r[r.length-1],el:e})}return this.add(t)},addDataTransfer:function(e){var t=this,i=[];if(e.items&&e.items.length){for(var s=[],r=0;r<e.items.length;r++){var a=e.items[r];(a=a.getAsEntry?a.getAsEntry()||a.getAsFile():a.webkitGetAsEntry&&a.webkitGetAsEntry()||a.getAsFile())&&s.push(a)}return new Promise((function(e,r){!function r(a){var n=s[a];if(!n||t.maximum>0&&i.length>=t.maximum)return e(t.add(i));t.getEntry(n).then((function(e){i.push.apply(i,v(e)),r(a+1)}))}(0)}))}if(e.files.length){for(var n=0;n<e.files.length&&(i.push(e.files[n]),!(this.maximum>0&&i.length>=this.maximum));n++);return Promise.resolve(this.add(i))}return Promise.resolve([])},getEntry:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(s,r){if(e.isFile)e.file((function(e){s([{size:e.size,name:i+e.name,type:e.type,file:e}])}));else if(e.isDirectory&&t.dropDirectory){var a=[],n=e.createReader();!function r(){n.readEntries((function(n){!function o(l){return!n[l]&&0===l||t.maximum>0&&a.length>=t.maximum?s(a):n[l]?void t.getEntry(n[l],i+e.name+"/").then((function(e){a.push.apply(a,v(e)),o(l+1)})):r()}(0)}))}()}else s([])}))},replace:function(e,t){var i=this.get(e),s=this.get(t);if(!i||!s||i===s)return!1;var r=this.files.concat([]),a=r.indexOf(i),n=r.indexOf(s);return-1!==a&&-1!==n&&(r[a]=s,r[n]=i,this.files=r,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var i=this.files.concat([]),s=i.indexOf(t);if(-1===s)return console.error("remove",t),!1;i.splice(s,1),this.files=i,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,t){var i=this.get(e);if(i){var s=f({},i,t);if(!i.fileObject||!i.active||s.active||s.error||s.success||(s.error="abort"),this.emitFilter(s,i))return!1;var r=this.files.concat([]),a=r.indexOf(i);return-1===a?(console.error("update",i),!1):(r.splice(a,1,s),this.files=r,delete this.maps[i.id],this.maps[s.id]=s,this.emitInput(),this.emitFile(s,i),s)}return!1},emitFilter:function(e,t){var i=!1;return this.$emit("input-filter",e,t,(function(){return i=!0})),i},emitFile:function(e,t){this.$emit("input-file",e,t),!(e&&e.fileObject&&e.active)||t&&t.active?e&&e.fileObject&&e.active||!t||!t.fileObject||!t.active||this.uploading--:(this.uploading++,this.$nextTick((function(){var t=this;setTimeout((function(){t.upload(e).then((function(){(e=t.get(e))&&e.fileObject&&t.update(e,{active:!1,success:!e.error})})).catch((function(i){t.update(e,{active:!1,success:!1,error:i.code||i.error||i.message||i})}))}),parseInt(50*Math.random()+50,10))}))),!this.active||Boolean(e)===Boolean(t)&&e.active===t.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var t=this.get(e);if(!t)return Promise.reject("not_exists");if(!t.fileObject)return Promise.reject("file_object");if(t.error)return Promise.reject(t.error);if(t.success)return Promise.resolve(t);var i=this.extensions;if(i&&(i.length||void 0===i.length)&&("object"===(void 0===i?"undefined":h(i))&&i instanceof RegExp||("string"==typeof i&&(i=i.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),i=new RegExp("\\.("+i.join("|").replace(/\./g,"\\.")+")$","i")),-1===t.name.search(i)))return Promise.reject("extension");if(this.size>0&&t.size>=0&&t.size>this.size)return Promise.reject("size");if(this.customAction)return this.customAction(t,this);if(this.features.html5){if(this.shouldUseChunkUpload(t))return this.uploadChunk(t);if(t.putAction)return this.uploadPut(t);if(t.postAction)return this.uploadHtml5(t)}return t.postAction?this.uploadHtml4(t):Promise.reject("No action configured")},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var t=this.chunkOptions.handler;return e.chunk=new t(e,this.chunkOptions),e.chunk.upload()},uploadPut:function(e){var t=[],i=void 0;for(var s in e.data)null!=(i=e.data[s])&&t.push(encodeURIComponent(s)+"="+encodeURIComponent(i));var r=t.length?(-1===e.putAction.indexOf("?")?"?":"&")+t.join("&"):"",a=new XMLHttpRequest;return a.open("PUT",e.putAction+r),this.uploadXhr(a,e,e.file)},uploadHtml5:function(e){var t=new window.FormData,i=void 0;for(var s in e.data)(i=e.data[s])&&"object"===(void 0===i?"undefined":h(i))&&"function"!=typeof i.toString?i instanceof File?t.append(s,i,i.name):t.append(s,JSON.stringify(i)):null!=i&&t.append(s,i);t.append(this.name,e.file,e.file.filename||e.name);var r=new XMLHttpRequest;return r.open("POST",e.postAction),this.uploadXhr(r,e,t)},uploadXhr:function(e,t,i){var s=this,r=t,a=0,n=0;e.upload.onprogress=function(e){if(r=s.get(r),e.lengthComputable&&r&&r.fileObject&&r.active){var t=Math.round(Date.now()/1e3);t!==a&&(a=t,r=s.update(r,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-n}),n=e.loaded)}};var o=setInterval((function(){if(!(r=s.get(r))||!r.fileObject||r.success||r.error||!r.active){o&&(clearInterval(o),o=!1);try{e.abort(),e.timeout=1}catch(e){}}}),100);return new Promise((function(t,a){var n=void 0,l=function(i){if(!n){if(n=!0,o&&(clearInterval(o),o=!1),!(r=s.get(r)))return a("not_exists");if(!r.fileObject)return a("file_object");if(r.error)return a(r.error);if(!r.active)return a("abort");if(r.success)return t(r);var l={};switch(i.type){case"timeout":case"abort":l.error=i.type;break;case"error":e.status?e.status>=500?l.error="server":e.status>=400&&(l.error="denied"):l.error="network";break;default:e.status>=500?l.error="server":e.status>=400?l.error="denied":l.progress="100.00"}if(e.responseText){var c=e.getResponseHeader("Content-Type");c&&-1!==c.indexOf("/json")?l.response=JSON.parse(e.responseText):l.response=e.responseText}return(r=s.update(r,l)).error?a(r.error):t(r)}};for(var c in e.onload=l,e.onerror=l,e.onabort=l,e.ontimeout=l,r.timeout&&(e.timeout=r.timeout),r.headers)e.setRequestHeader(c,r.headers[c]);r=s.update(r,{xhr:e}),e.send(i)}))},uploadHtml4:function(e){var t=this,i=e,s=function(e){27===e.keyCode&&e.preventDefault()},r=document.createElement("iframe");r.id="upload-iframe-"+i.id,r.name="upload-iframe-"+i.id,r.src="about:blank",r.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var a=document.createElement("form");a.action=i.postAction,a.name="upload-form-"+i.id,a.setAttribute("method","POST"),a.setAttribute("target","upload-iframe-"+i.id),a.setAttribute("enctype","multipart/form-data");var n=void 0,o=void 0;for(var l in i.data)(n=i.data[l])&&"object"===(void 0===n?"undefined":h(n))&&"function"!=typeof n.toString&&(n=JSON.stringify(n)),null!=n&&((o=document.createElement("input")).type="hidden",o.name=l,o.value=n,a.appendChild(o));a.appendChild(i.el),document.body.appendChild(r).appendChild(a);var c=function(){var e=void 0;try{r.contentWindow&&(e=r.contentWindow.document)}catch(e){}if(!e)try{e=r.contentDocument?r.contentDocument:r.document}catch(t){e=r.document}return e&&e.body?e.body.innerHTML:null};return new Promise((function(e,n){setTimeout((function(){if(!(i=t.update(i,{iframe:r})))return n("not_exists");var o=setInterval((function(){(i=t.get(i))&&i.fileObject&&!i.success&&!i.error&&i.active||(o&&(clearInterval(o),o=!1),r.onabort({type:i?"abort":"not_exists"}))}),100),l=void 0,d=function(r){if(!l){if(l=!0,o&&(clearInterval(o),o=!1),document.body.removeEventListener("keydown",s),!(i=t.get(i)))return n("not_exists");if(!i.fileObject)return n("file_object");if(i.error)return n(i.error);if(!i.active)return n("abort");if(i.success)return e(i);var a=c(),d={};switch(r.type){case"abort":d.error="abort";break;case"error":i.error?d.error=i.error:d.error=null===a?"network":"denied";break;default:i.error?d.error=i.error:null===d?d.error="network":d.progress="100.00"}if(null!==a){if(a&&"{"===a.substr(0,1)&&"}"===a.substr(a.length-1,1))try{a=JSON.parse(a)}catch(e){}d.response=a}return(i=t.update(i,d)).error?n(i.error):e(i)}};r.onload=d,r.onerror=d,r.onabort=d,document.body.addEventListener("keydown",s),a.submit()}),50)})).then((function(e){return r.parentNode&&r.parentNode.removeChild(r),e})).catch((function(e){return r.parentNode&&r.parentNode.removeChild(r),e}))},watchActive:function(e){for(var t=void 0,i=0;t=this.files[i];)if(i++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;t.active||t.error||t.success||this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});0===this.uploading&&(this.active=!1)},watchDrop:function(e){var t=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(e){}t?"string"==typeof t?t=document.querySelector(t)||this.$root.$el.querySelector(t):!0===t&&(t=this.$parent.$el):t=!1,this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){if(e.preventDefault(),!this.dropActive&&e.dataTransfer){var t=e.dataTransfer;t.files&&t.files.length?this.dropActive=!0:t.types?(t.types.indexOf&&-1!==t.types.indexOf("Files")||t.types.contains&&t.types.contains("Files"))&&(this.dropActive=!0):this.dropActive=!0}},onDragleave:function(e){e.preventDefault(),this.dropActive&&("HTML"===e.target.nodeName||e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},y="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function b(e){return function(e,t){return C(e,t)}}var x=document.head||document.getElementsByTagName("head")[0],_={};function C(e,t){var i=y?t.media||"default":e,s=_[i]||(_[i]={ids:new Set,styles:[]});if(!s.ids.has(e)){s.ids.add(e);var r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",t.media&&s.element.setAttribute("media",t.media),x.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(r),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{var a=s.ids.size-1,n=document.createTextNode(r),o=s.element.childNodes;o[a]&&s.element.removeChild(o[a]),o.length?s.element.insertBefore(n,o[a]):s.element.appendChild(n)}}}var w=void 0,k=void 0,j=l({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{class:e.className},[e._t("default"),e._v(" "),i("label",{attrs:{for:e.inputId||e.name}}),e._v(" "),i("input-file")],2)},staticRenderFns:[]},(function(e){e&&e("data-v-76d380b6_0",{source:".file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block}.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0}",map:void 0,media:void 0})}),g,w,!1,k,b,void 0);function F(e){return e&&e.default||e}return F(Object.freeze({default:j}))}()}}]);